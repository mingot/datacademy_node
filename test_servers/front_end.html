<html>
<head></head>
<body>
  <div class="row">
    <div id="content"></div>
      <form>
        &gt; <input>
      </form>
    </div>
  </div>

    <script src="lib/socket.io.js"></script>
    <!-- <script src="http://code.jquery.com/jquery-latest.min.js"></script> -->
    <script src="lib/jquery-latest.min.js"></script>
    <script type="text/javascript" charset="utf-8">
      function add_content(str){
        $('#content').append('<p><pre>' + $('<div/>').text(str).html() + '</pre></p>');
        $(window).scrollTop($('body').height() - $(window).height() + 80);
      }
      
      // this socket connects to our node backend (server.js) which handles rserve
      //var socket = io.connect('http://datacademy-node.herokuapp.com/');    
      var socket = io.connect('http://localhost:5000');

      socket.on('response', function(data) {
        var lines = data.split('\n');
        for (var i = 0; i < lines.length; i++) {
          add_content(lines[i]);
        }
      });

      $(function(){ $('form').submit(function(e){
          var input = $('input');
          var inputVal = input.val();
          socket.emit('message',inputVal);
          add_content('>' + inputVal);
          input.val('');
          return false;
        });
        $('input').focus();
      });
    
    </script> 

</body>
</html>
